pico-8 cartridge // http://www.pico-8.com
version 18
__lua__

particles = {}

ship = {x = 64, y = 64, pgap = 0}

function ship:update()
    local moved = false

    if (btn(➡️)) then moved = true; self.x += 1 end
    if (btn(⬅️)) then moved = true; self.x -= 1 end
    if (btn(⬆️)) then moved = true; self.y -= 1 end
    if (btn(⬇️)) then moved = true; self.y += 1 end

    self.pgap += 1

    if self.pgap > 1 then
        if moved then
            add(particles, {x = self.x, y = self.y, age=0})
        end
        self.pgap = 0
    end    
end

function ship:draw()
    spr(0, self.x - 4, self.y - 4)
end

function update_particles()
    for p in all(particles) do
        if p.age > 30 then del(particles, p)
        else
            p.age += 1
        end
    end
end

function draw_particles()
    for p in all(particles) do
        local c = 7
        if (p.age>10) c = 6
        if (p.age>20) c = 13

        pset(p.x, p.y, c)
    end
end
    
function _update60()
    update_particles()
    ship:update()
end

function _draw()
    cls()
    draw_particles()
    ship:draw()
end

__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000667000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000c6060000066000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0866c66700cc06000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000c6060006c00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000080000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
